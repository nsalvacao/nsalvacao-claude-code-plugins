:root {
  --bg-primary: #faf9f5;
  --bg-secondary: #F5F4EF;
  --bg-card: #ffffff;
  --text-primary: #141413;
  --text-secondary: #5c5c5a;
  --text-muted: #8c8c8a;
  --accent: #D97757;
  --accent-hover: #c4684a;
  --border: #e5e4df;
  --border-light: #eeeee9;
  --shadow: rgba(20, 20, 19, 0.04);
  --shadow-hover: rgba(20, 20, 19, 0.08);
  --sidebar-width: 240px;
  --success: #2e7d32;
  --warning: #ed6c02;
  --error: #d32f2f;
}

* { box-sizing: border-box; margin: 0; padding: 0; }

body {
  font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
  background: var(--bg-primary);
  color: var(--text-primary);
  height: 100vh;
  line-height: 1.5;
  overflow: hidden;
  display: flex;
}

/* ===== SIDEBAR ===== */
aside {
  width: var(--sidebar-width);
  background: var(--bg-secondary);
  border-right: 1px solid var(--border);
  display: flex;
  flex-direction: column;
  flex-shrink: 0;
}

.sidebar-header {
  padding: 24px;
  display: flex;
  align-items: center;
  gap: 12px;
  border-bottom: 1px solid var(--border);
}

.sidebar-header h1 { font-size: 1.1rem; font-weight: 700; letter-spacing: -0.02em; }

nav { flex: 1; padding: 16px 12px; }

.nav-item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 10px 12px;
  color: var(--text-secondary);
  text-decoration: none;
  border-radius: 8px;
  font-size: 14px;
  font-weight: 500;
  margin-bottom: 4px;
  cursor: pointer;
  transition: all 0.15s ease;
}

.nav-item:hover { background: var(--border-light); color: var(--text-primary); }
.nav-item.active { background: var(--bg-card); color: var(--accent); box-shadow: 0 1px 3px var(--shadow); }

.sidebar-footer { padding: 16px; border-top: 1px solid var(--border); }

/* ===== SIDEBAR SECTIONS ===== */
.sidebar-section {
  padding: 16px 24px;
  border-top: 1px solid var(--border);
}

.sidebar-section-title {
  font-size: 11px;
  font-weight: 700;
  text-transform: uppercase;
  color: var(--text-muted);
  letter-spacing: 0.05em;
  margin-bottom: 12px;
}

.pulse-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.pulse-item {
  font-size: 12px;
  display: flex;
  align-items: center;
  gap: 8px;
  color: var(--text-secondary);
}

.pulse-dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  flex-shrink: 0;
}

.dot-success { background: var(--success); box-shadow: 0 0 8px rgba(46, 125, 50, 0.4); }
.dot-warning { background: var(--warning); box-shadow: 0 0 8px rgba(237, 108, 2, 0.4); }
.dot-error { background: var(--error); box-shadow: 0 0 8px rgba(211, 47, 47, 0.4); }
.dot-gray { background: var(--text-muted); }

.project-selector {
  width: 100%;
  padding: 10px;
  background: var(--accent);
  color: white;
  border: none;
  border-radius: 8px;
  font-size: 13px;
  font-weight: 600;
  cursor: pointer;
}

/* ===== MAIN CONTENT ===== */
main {
  flex: 1;
  display: flex;
  flex-direction: column;
  overflow: hidden;
  background: var(--bg-primary);
}

header {
  padding: 16px 32px;
  border-bottom: 1px solid var(--border);
  display: flex;
  justify-content: space-between;
  align-items: center;
  flex-shrink: 0;
}

.view-title h2 { font-size: 1.25rem; font-weight: 600; }
.view-title .breadcrumb { font-size: 12px; color: var(--text-muted); }

.actions { display: flex; gap: 12px; }

button {
  background: var(--bg-card);
  color: var(--text-primary);
  border: 1px solid var(--border);
  padding: 8px 16px;
  border-radius: 8px;
  cursor: pointer;
  font-size: 13px;
  font-weight: 500;
  transition: all 0.1s ease;
}

button:hover { background: var(--bg-secondary); }
button.primary { background: var(--accent); color: white; border-color: var(--accent); }
button.primary:hover { background: var(--accent-hover); }

/* ===== PANELS ===== */
.view-panel { flex: 1; overflow-y: auto; padding: 32px; display: none; }
.view-panel.active { display: block; }

/* ===== OVERVIEW / HOME ===== */
.kpi-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 20px; margin-bottom: 32px; }
.kpi-card { background: var(--bg-card); border: 1px solid var(--border-light); border-radius: 12px; padding: 24px; box-shadow: 0 1px 3px var(--shadow); }
.kpi-value { font-size: 2rem; font-weight: 700; color: var(--text-primary); margin-bottom: 4px; }
.kpi-label { font-size: 13px; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.05em; }

.dashboard-row { display: grid; grid-template-columns: 2fr 1fr; gap: 24px; }
.chart-container { background: var(--bg-card); border: 1px solid var(--border-light); border-radius: 12px; padding: 24px; min-height: 300px; }

/* ===== INVENTORY ===== */
.inventory-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 16px; }
.cli-card { background: var(--bg-card); border: 1px solid var(--border-light); border-radius: 10px; padding: 16px; display: flex; flex-direction: column; gap: 12px; transition: transform 0.15s ease; }
.cli-card:hover { transform: translateY(-2px); box-shadow: 0 4px 12px var(--shadow-hover); }
.cli-header { display: flex; justify-content: space-between; align-items: center; }
.cli-name { font-weight: 600; font-size: 1.1rem; }
.status-badge { padding: 4px 10px; border-radius: 20px; font-size: 11px; font-weight: 700; text-transform: uppercase; }
.status-ready { background: #e8f5e9; color: var(--success); }
.status-pending { background: #fff3e0; color: var(--warning); }
.status-missing { background: #ffebee; color: var(--error); }

/* ===== MARKDOWN STYLING ===== */
.markdown-content { line-height: 1.7; color: #37352f; font-size: 15px; }
.markdown-content h1 { font-size: 2.2em; font-weight: 700; margin: 0.8em 0 0.4em; color: var(--text-primary); border-bottom: 1px solid var(--border); padding-bottom: 0.3em; }
.markdown-content h2 { font-size: 1.5em; font-weight: 600; margin: 1.5em 0 0.5em; color: var(--text-primary); }
.markdown-content h3 { font-size: 1.25em; font-weight: 600; margin: 1.2em 0 0.4em; }
.markdown-content p { margin-bottom: 1em; }
.markdown-content ul, .markdown-content ol { margin: 0 0 1em 1.5em; }
.markdown-content li { margin-bottom: 0.4em; }
.markdown-content code { background: #f7f6f3; color: #eb5757; padding: 0.2em 0.4em; border-radius: 3px; font-family: 'JetBrains Mono', monospace; font-size: 0.9em; }
.markdown-content pre { background: #f7f6f3; padding: 1.5em; border-radius: 8px; overflow-x: auto; margin: 1.2em 0; border: 1px solid var(--border-light); }
.markdown-content table { width: 100%; border-collapse: collapse; margin: 1.5em 0; font-size: 14px; }
.markdown-content th { background: #fbfbfa; font-weight: 600; text-align: left; padding: 10px 12px; border: 1px solid var(--border); }
.markdown-content td { padding: 8px 12px; border: 1px solid var(--border); }

/* ===== MEMORY STYLES ===== */
.memory-tabs { display: flex; gap: 4px; margin-bottom: 16px; background: var(--bg-secondary); padding: 4px; border-radius: 8px; overflow-x: auto; }
.memory-tab { padding: 8px 16px; border-radius: 6px; font-size: 13px; font-weight: 500; cursor: pointer; color: var(--text-muted); border: none; background: transparent; transition: all 0.15s ease; white-space: nowrap; }
.memory-tab.active { background: var(--bg-card); color: var(--text-primary); box-shadow: 0 1px 3px var(--shadow); }
.memory-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 16px; }
.memory-card { background: var(--bg-card); border: 1px solid var(--border-light); border-radius: 10px; padding: 16px; cursor: pointer; transition: all 0.15s ease; box-shadow: 0 1px 3px var(--shadow); }
.memory-card:hover { border-color: var(--accent); box-shadow: 0 4px 12px var(--shadow-hover); }
.memory-card-title { font-weight: 600; font-size: 15px; margin-bottom: 8px; color: var(--text-primary); }
.memory-card-preview { font-size: 13px; color: var(--text-secondary); line-height: 1.5; overflow: hidden; display: -webkit-box; -webkit-line-clamp: 3; -webkit-box-orient: vertical; }

/* ===== TASKS STYLES ===== */
.board { display: flex; gap: 24px; padding-bottom: 24px; overflow-x: auto; flex: 1; }
.column { background: var(--bg-secondary); border-radius: 12px; min-width: 320px; max-width: 320px; display: flex; flex-direction: column; height: 100%; }
.column-header { padding: 16px; display: flex; justify-content: space-between; align-items: center; font-weight: 600; font-size: 13px; color: var(--text-secondary); text-transform: uppercase; letter-spacing: 0.05em; }
.cards { flex: 1; padding: 0 12px 12px; overflow-y: auto; }
.task-card { background: var(--bg-card); border-radius: 10px; padding: 16px; margin-bottom: 12px; box-shadow: 0 1px 3px var(--shadow); border: 1px solid var(--border-light); cursor: pointer; transition: all 0.15s ease; }
.task-card:hover { border-color: var(--accent); box-shadow: 0 4px 12px var(--shadow-hover); }
.task-id { font-family: 'JetBrains Mono', monospace; font-size: 11px; color: var(--accent); font-weight: 600; margin-bottom: 4px; }
.task-title-row { display: flex; gap: 10px; align-items: flex-start; }
.task-title { font-size: 14px; font-weight: 500; color: var(--text-primary); line-height: 1.4; }
.task-tags { display: flex; flex-wrap: wrap; gap: 4px; margin-top: 8px; }
.task-tag { font-size: 10px; font-weight: 700; padding: 2px 6px; border-radius: 4px; background: var(--bg-secondary); color: var(--text-muted); text-transform: uppercase; }
.tag-p { background: #e3f2fd; color: #1976d2; }
.tag-new { background: #f1f8e9; color: #388e3c; }
.tag-critical { background: #ffebee; color: #d32f2f; }

.checkbox { width: 18px; height: 18px; border: 2px solid var(--border); border-radius: 5px; display: inline-flex; cursor: pointer; flex-shrink: 0; margin-top: 2px; }
.checkbox.checked { background: var(--accent); border-color: var(--accent); position: relative; }
.checkbox.checked::after { content: ''; position: absolute; left: 5px; top: 1px; width: 4px; height: 8px; border: solid white; border-width: 0 2px 2px 0; transform: rotate(45deg); }

/* ===== MODAL & EDITOR ===== */
.modal-overlay { display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(20, 20, 19, 0.4); backdrop-filter: blur(4px); z-index: 1000; align-items: center; justify-content: center; }
.modal { background: white; border-radius: 16px; width: 90%; max-width: 1100px; height: 85vh; overflow: hidden; display: flex; flex-direction: column; box-shadow: 0 30px 80px rgba(0,0,0,0.25); }
.modal-header { padding: 16px 32px; border-bottom: 1px solid var(--border); display: flex; justify-content: space-between; align-items: center; background: var(--bg-primary); }
.modal-tabs { display: flex; gap: 4px; background: var(--bg-secondary); padding: 4px; border-radius: 8px; }
.modal-tab { padding: 6px 16px; border-radius: 6px; font-size: 12px; font-weight: 600; border: none; background: transparent; cursor: pointer; color: var(--text-muted); }
.modal-tab.active { background: white; color: var(--accent); box-shadow: 0 1px 3px var(--shadow); }
.modal-body { flex: 1; overflow: hidden; display: flex; position: relative; }
#modalPreview { padding: 40px 60px; overflow-y: auto; flex: 1; }
#modalEditor { padding: 0; flex: 1; display: none; }
#modalTextarea { width: 100%; height: 100%; border: none; padding: 32px; font-family: 'JetBrains Mono', monospace; font-size: 14px; line-height: 1.6; color: var(--text-primary); resize: none; outline: none; background: #fbfbfa; }
.modal-footer { padding: 16px 32px; border-top: 1px solid var(--border); display: flex; justify-content: flex-end; gap: 12px; background: var(--bg-primary); }

.doc-meta-bar { display: flex; flex-wrap: wrap; gap: 12px; margin-bottom: 24px; padding: 16px; background: var(--bg-secondary); border-radius: 8px; border: 1px solid var(--border-light); }
.meta-tag { font-size: 12px; display: flex; gap: 6px; }
.meta-key { font-weight: 600; color: var(--text-secondary); }
.meta-val { color: var(--text-primary); }

/* ===== SPOTLIGHT STYLES ===== */
.spotlight-overlay {
  display: none;
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(20, 20, 19, 0.4);
  backdrop-filter: blur(8px);
  z-index: 2000;
  padding-top: 15vh;
  align-items: flex-start;
  justify-content: center;
}

.spotlight-modal {
  background: white;
  width: 90%;
  max-width: 650px;
  border-radius: 12px;
  box-shadow: 0 20px 60px rgba(0,0,0,0.3);
  overflow: hidden;
  display: flex;
  flex-direction: column;
}

.spotlight-results {
  max-height: 400px;
  overflow-y: auto;
  padding: 8px;
}

.spotlight-result {
  padding: 12px 16px;
  border-radius: 8px;
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 12px;
  transition: background 0.1s ease;
}

.spotlight-result:hover, .spotlight-result.active {
  background: var(--bg-secondary);
}

.result-icon { font-size: 18px; width: 24px; text-align: center; }
.result-text { flex: 1; min-width: 0; }
.result-title { font-size: 14px; font-weight: 500; color: var(--text-primary); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.result-sub { font-size: 11px; color: var(--text-muted); }

/* ===== DEPENDENCY MAP STYLES ===== */
.dependency-map {
  margin: 24px 0;
  padding: 20px;
  background: white;
  border: 1px solid var(--border-light);
  border-radius: 12px;
  overflow-x: auto;
}

/* ===== CHAT BUBBLES ===== */
.chat-msg {
  padding: 12px 16px;
  border-radius: 14px;
  font-size: 13px;
  line-height: 1.5;
  max-width: 85%;
  position: relative;
}

.chat-msg-user {
  background: var(--accent);
  color: white;
  align-self: flex-end;
  border-bottom-right-radius: 4px;
}

.chat-msg-bot {
  background: white;
  color: var(--text-primary);
  border: 1px solid var(--border-light);
  align-self: flex-start;
  border-bottom-left-radius: 4px;
  box-shadow: 0 2px 4px var(--shadow);
}

.empty-state { text-align: center; padding: 100px 0; color: var(--text-muted); width: 100%; }
.hidden { display: none; }
